replicaCount:
  backend: 1
  frontend: 1

backend:
  image: ghcr.io/oegge/above-encounters
  tag: latest
  pullPolicy: IfNotPresent
  port: 8080
  mediaMountPath: /data/media
  extraEnv: { }
  LOG_LEVEL: info
  imagePullSecrets:
    - name: ghcr-cred
frontend:
  image: ghcr.io/oegge/above-encounters-frontend
  tag: latest
  pullPolicy: Always
  port: 80
  imagePullSecrets:
    - name: ghcr-cred

mongodb:
  image:
    repository: docker.io/bitnami/mongodb
  enabled: true
  auth:
    enabled: true
    rootPassword: "supersecret"
    username: "appuser"
    password: "apppass"
    database: "appdb"
  architecture: standalone
  persistence:
    enabled: true
    size: 8Gi

wwwroot:
  enabled: true
  storage: 100Gi
  # leave empty to use the cluster default StorageClass
  storageClassName: ""

media:
  storage: 50Gi
  storageClassName: "standard"

service:
  type: ClusterIP

ingress:
  frontend:
    enabled: true
    className: "nginx"
    host: encounters.above.de
    annotations: { }
    tls: [ ] # e.g. [{ secretName: music-frontend-tls, hosts: [music.local] }]
  backend:
    enabled: true
    className: "nginx"
    host: api.encounters.above.de
    annotations: { }
    tls: [ ]

resources:
  backend: { }
  frontend: { }
  postgres: { }

controller:
  hostPort:
    enabled: true
    ports:
      http: 80
      https: 443
  config:
    proxy-body-size: "50m"
  # make sure only one controller runs on a single-node dev cluster
  replicaCount: 1

  service:
    type: ClusterIP   # you donâ€™t need NodePort/LoadBalancer anymore

  # If you had this on before (common with LB setups), turn it off
  publishService:
    enabled: false
